
<p-toast></p-toast>

        <button pButton pRipple label="edit" style="width: 45px !important;" class="p-button-rounded p-button-success theme-btn ac-btn" (click)="newZone()"></button>
  
<form [formGroup]="zoneForm" (ngSubmit)="onSubmitForm()">
    <p-dialog id="new-zone-model" [(visible)]="zoneDialog" [style]="{width: '1200px'}" header="Zone Price Edit"
        [modal]="true" class="p-fluid" [dismissableMask]="true">
        <ng-template pTemplate="content">
            <div>
                <div class="formgrid grid">
                    <div class="field col mt-4">
                        <label>From Zone<span class="star-sign">*</span></label>
                        <p-dropdown id="from_zone" [options]="lstZones" name="from_zone"
                            formControlName="from_zone" (onChange)="zonesNotSame(zoneForm)" placeholder="Select From Zone">
                        </p-dropdown>
                        <div class="invalid-feedback">
                            <small style="color:red;" *ngIf="zoneForm.controls.from_zone.invalid && (zoneForm.controls.from_zone.touched || submitted)">
                        required from zone!</small>
                        </div>

                    </div>
                    <div class="field col mt-4">
                        <label>To Zone<span class="star-sign">*</span></label>
                        <p-dropdown id="to_zone" filter="true" [options]="lstZones" name="to_zone"
                            formControlName="to_zone" placeholder="Select To Zone" (onChange)="zonesNotSame(zoneForm)">
                        </p-dropdown>
                        <div class="invalid-feedback">
                            <small style="color:red;" *ngIf="zoneForm.controls.to_zone.invalid && (zoneForm.controls.to_zone.touched || submitted)">
                                required to zone!
                            </small>
                          </div>
                        <div *ngIf="IsSameZone==true" class="invalid-feedback">
                            <small style="color:red;">To Zone and Price cannot be the same!</small>
                          </div>
                    </div>
                    
                </div>
                <div class="formgrid grid">
                    <div class="field col-6">
                        <label for="name">Price <span class="star-sign">*</span></label>
                        <input type="number" pInputText id="zone_price" formControlName="zone_price" placeholder="Enter Amount"
                               inputmode="numeric" min="1" max="10000" step="0.01" />
                        
                        <!-- Show error after submit or when the field is touched -->
                        <div *ngIf="(zoneForm.controls.zone_price?.touched || submitted) && zoneForm.controls.zone_price?.errors?.required" class="invalid-feedback">
                            <small style="color:red;">Please provide a valid Price!</small>
                        </div>
                        <div *ngIf="(zoneForm.controls.zone_price?.touched || submitted) && zoneForm.controls.zone_price?.errors?.min" class="invalid-feedback">
                            <small style="color:red;">Price cannot be less than 1!</small>
                        </div>
                        <div *ngIf="(zoneForm.controls.zone_price?.touched || submitted) && zoneForm.controls.zone_price?.errors?.max" class="invalid-feedback">
                            <small style="color:red;">Price cannot exceed 10,000!</small>
                        </div>
                    </div>
                    <div *ngIf="zoneForm.errors?.sameZoneAndPrice" class="invalid-feedback">
                        <small style="color:red;">To Zone and Price cannot be the same!</small>
                    </div>
                </div>                
            </div>

            
          

            <div class="grid grid-nogutter justify-content-end mt-3">
 
                <button pRipple label="Submit"  icon="pi pi-check"
                    class="theme-btn ml-1">
                    <p-progressSpinner *ngIf="btnloading" [style]="{width: '25px', height: '25px'}"
                        styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)"
                        animationDuration=".5s"></p-progressSpinner>
                    Submit
                </button>
            </div>
        </ng-template>

    </p-dialog>
</form>